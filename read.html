<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Shloka Reading</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Google Fonts -->
  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400;500&display=swap">

  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: "Poppins", sans-serif;
      color: #3b2416;
      padding: 20px;
      position: relative;
      overflow: hidden;

      /* background controlled by JS */
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      transition: background-image 0.6s ease;
    }

    /* light overlay */
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background: rgba(255,255,255,0.45);
      pointer-events: none;
      z-index: -1;
    }

    .card {
      background: transparent;
      width: min(900px, 95%);
      border-radius: 18px;
      padding: 32px 40px 40px;
      text-align: center;
    }

    .top-border {
      height: 4px;
      border-radius: 999px;
      background: linear-gradient(90deg, #ffb66a, #e96b20);
      margin: 0 auto 26px;
      max-width: 520px;
    }

    .title {
      font-family: "Playfair Display", serif;
      font-size: 2.1rem;
      margin-bottom: 6px;
      color: #2a150c;
      text-shadow: 0 2px 4px rgba(255,255,255,0.8);
    }

    .subtitle {
      font-size: 0.95rem;
      color: #5f4334;
      margin-bottom: 26px;
      text-shadow: 0 1px 3px rgba(255,255,255,0.9);
    }

    .shloka-box {
      background: rgba(253,247,239,0.9);
      border-radius: 14px;
      padding: 22px;
      margin-bottom: 18px;
      font-family: "Playfair Display", serif;
      font-size: 1.35rem;
      line-height: 1.8;
    }

    .meaning-box {
      background: rgba(255,250,245,0.9);
      border-radius: 14px;
      padding: 20px;
      font-size: 1rem;
      line-height: 1.7;
      margin-bottom: 14px;
      color: #4b372b;
    }

    .audio-label {
      font-weight: 600;
      color: #c05a22;
      margin: 6px 0 4px;
    }

    .audio-box {
      margin-bottom: 18px;
      padding: 12px;
      background: rgba(255,247,239,0.9);
      border-radius: 14px;
      display: flex;
      justify-content: center;
    }

    .audio-box audio {
      width: 100%;
      max-width: 420px;
    }

    .nav {
      margin-top: 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
    }

    .nav button {
      border: none;
      border-radius: 999px;
      background: #d96621;
      color: #fff;
      padding: 12px 32px;
      cursor: pointer;
    }

    .nav button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .back-center {
      font-size: 0.95rem;
      font-weight: 700;
      color: #311305;
      text-decoration: none;
    }

    @media (max-width: 600px) {
      .card { padding: 26px 20px 32px; }
      .nav { flex-direction: column; }
    }
  </style>
</head>

<body>
  <section class="card">
    <div class="top-border"></div>

    <h1 class="title">Sundarakanda</h1>
    <p class="subtitle">Sacred verses from Valmiki Ramayana</p>

    <div id="shlokaText" class="shloka-box">Loading shloka...</div>

    <div class="audio-label">Sanskrit Recitation</div>
    <div class="audio-box">
      <audio id="audioSanskrit" controls></audio>
    </div>

    <div class="audio-label" id="langLabel">Translation Recitation</div>
    <div class="audio-box">
      <audio id="audioLang" controls></audio>
    </div>

    <div id="meaningText" class="meaning-box">Loading meaning...</div>

    <div class="nav">
      <button id="prevBtn">‚Üê Previous</button>
      <a id="backLink" class="back-center">‚Üê Back to Selection</a>
      <button id="nextBtn">Next ‚Üí</button>
    </div>
  </section>

  <!-- DATA -->
  <script src="shlokas.js"></script>

  <!-- LOGIC -->
  <script>
    const params = new URLSearchParams(window.location.search);
    let index = parseInt(params.get("s")) || 0;
    const lang = params.get("lang") || "en";

    /* üî• BACKGROUND IMAGES */
    const backgrounds = [
      "pic1.jpg",
      "pic2.jpg",
      "pic3.jpg",
      "pic4.jpg",
      "pic5.jpg",
      "pic6.jpg",
      "pic7.jpg",
      "pic8.jpg",
      "pic9.jpg",
      "pic10.jpg"
    ];

    const shlokaBox = document.getElementById("shlokaText");
    const meaningBox = document.getElementById("meaningText");
    const audioSanskrit = document.getElementById("audioSanskrit");
    const audioLang = document.getElementById("audioLang");
    const langLabel = document.getElementById("langLabel");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    const backLink = document.getElementById("backLink");

    backLink.href = `translate.html?lang=${lang}`;

    function render() {
      document.body.style.backgroundImage =
        `url('${backgrounds[index]}')`;

      const data = shlokas[index];
      shlokaBox.textContent = data.sanskrit;
      meaningBox.textContent = data.meaning[lang];

      audioSanskrit.src = `audio/shloka${index + 1}.mp3`;

      switch (lang) {
        case "en": audioLang.src = `audio/eng${index + 1}.mp3`; break;
        case "hi": audioLang.src = `audio/hin${index + 1}.mp3`; break;
        case "te": audioLang.src = `audio/te${index + 1}.mp3`; break;
        case "ta": audioLang.src = `audio/ta${index + 1}.mp3`; break;
        case "ka": audioLang.src = `audio/ka${index + 1}.mp3`; break;
      }

      langLabel.textContent =
        lang === "en" ? "English Recitation" :
        lang === "hi" ? "Hindi Recitation" :
        lang === "te" ? "Telugu Recitation" :
        lang === "ta" ? "Tamil Recitation" :
        "Kannada Recitation";

      prevBtn.disabled = index === 0;
      nextBtn.textContent =
        index === shlokas.length - 1 ? "Finish ‚Üí" : "Next ‚Üí";
    }

    prevBtn.onclick = () => {
      if (index > 0) { index--; render(); }
    };

    nextBtn.onclick = () => {
      if (index < shlokas.length - 1) {
        index++;
        render();
      } else {
        window.location.href = `end.html?lang=${lang}`;
      }
    };

    render();
  </script>
</body>
</html>
